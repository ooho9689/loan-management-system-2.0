<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æ‰‹æ©Ÿç§Ÿè³ƒç®¡ç†ç³»çµ±</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* 2.0 çš„æ¨£å¼ */
    #sales-management {
      display: none;
    }
    #sales-management .container {
      padding: 20px;
    }
    #sales-management .header {
      text-align: center;
      margin-bottom: 30px;
      padding: 30px 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 16px;
      color: white;
      box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
    }
    #sales-management h1 {
      font-size: 32px;
      margin-bottom: 12px;
      font-weight: 700;
      color: white;
    }
    #sales-management p {
      font-size: 16px;
      color: rgba(255, 255, 255, 0.9);
      font-weight: 400;
    }
    #sales-management .stats-grid {
      display: flex;
      justify-content: space-between;
      margin-bottom: 30px;
      gap: 15px;
    }
    #sales-management .stat-card {
      text-align: center;
      padding: 20px 15px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      border-radius: 12px;
      flex: 1;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      color: white;
    }
    #sales-management .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
    }
    #sales-management .stat-icon {
      font-size: 28px;
      margin-bottom: 12px;
      display: block;
    }
    #sales-management .stat-number {
      font-size: 32px;
      font-weight: bold;
      margin-bottom: 8px;
      color: white;
    }
    #sales-management .stat-label {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.9);
      font-weight: 500;
    }
    #sales-management .main-content {
      display: flex;
      gap: 20px;
    }
    #sales-management .sales-list-section {
      flex: 1;
    }
    #sales-management .sales-list-section .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      padding: 20px 25px;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border-radius: 12px;
      border: 1px solid #e9ecef;
    }
    #sales-management .sales-list-section h2 {
      font-size: 22px;
      margin: 0;
      color: #2c3e50;
      font-weight: 600;
    }
    #sales-management .sales-list-section .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 18px;
      font-weight: 800;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      width: 200px; /* å›ºå®šå®½åº¦ */
      max-width: 250px;
    }
    #sales-management .sales-list-section .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }
    #sales-management .sales-list-section .btn-primary span {
      font-size: 16px;
    }
    #sales-management .sales-grid {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    #sales-management .sales-grid .sales-item {
      width: 100%;
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
      padding: 25px;
      border: 1px solid #e9ecef;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
      margin-bottom: 20px;
    }
    #sales-management .sales-grid .sales-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 30px rgba(0,0,0,0.12);
      border-color: #667eea;
    }
    #sales-management .sales-grid .sales-item .sales-icon {
      font-size: 24px;
      margin-bottom: 10px;
    }
    #sales-management .sales-grid .sales-item .sales-name {
      font-size: 16px;
      margin-bottom: 5px;
    }
    #sales-management .sales-grid .sales-item .sales-phone {
      font-size: 14px;
      color: #666;
    }
    #sales-management .sales-form-sidebar {
      width: 300px;
      background-color: #f9f9f9;
      padding: 20px;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    #sales-management .form-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    #sales-management .form-header h3 {
      font-size: 18px;
      margin-bottom: 5px;
    }
    #sales-management .close-btn {
      font-size: 24px;
      color: #666;
      cursor: pointer;
    }
    #sales-management .form-group {
      margin-bottom: 15px;
    }
    #sales-management .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    #sales-management .form-group input[type="text"],
    #sales-management .form-group input[type="email"],
    #sales-management .form-group input[type="password"],
    #sales-management .form-group input[type="tel"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    #sales-management .form-actions {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    #sales-management .btn-primary,
    #sales-management .btn-secondary {
      flex: 1;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-right: 10px;
    }
    #sales-management .btn-primary {
      background-color: #4CAF50;
      color: white;
    }
    #sales-management .btn-secondary {
      background-color: #ccc;
      color: #333;
    }
    
    /* å®¢æˆ¶å¡ç‰‡æ¨£å¼ */
    #sales-management .customers-section {
      margin-top: 20px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
    }
    
    #sales-management .customer-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    #sales-management .customer-card {
      background: white;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      padding: 12px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    #sales-management .customer-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    
    #sales-management .customer-info {
      display: flex;
      gap: 15px;
      align-items: center;
    }
    
    #sales-management .customer-name {
      font-weight: bold;
      color: #333;
    }
    
    #sales-management .customer-model {
      color: #666;
      font-size: 14px;
    }
    
    #sales-management .customer-status {
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: bold;
    }
    
    #sales-management .status-normal {
      background: #d4edda;
      color: #155724;
    }
    
    #sales-management .status-overdue {
      background: #f8d7da;
      color: #721c24;
    }
    
    #sales-management .status-completed {
      background: #d1ecf1;
      color: #0c5460;
    }
    
    #sales-management .status-locked {
      background: #fff3cd;
      color: #856404;
    }
    
    #sales-management .finance-toggle {
      background: #667eea;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
    }
    
    #sales-management .finance-summary {
      display: none;
      margin-top: 10px;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 4px;
      border-left: 4px solid #667eea;
    }
    
    #sales-management .finance-summary.show {
      display: block;
      animation: slideDown 0.3s ease;
    }
    
    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    #sales-management .finance-summary h6 {
      margin: 0 0 10px 0;
      color: #333;
      font-size: 14px;
    }
    
    #sales-management .finance-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }
    
    #sales-management .finance-item {
      display: flex;
      justify-content: space-between;
      padding: 4px 0;
    }
    
    #sales-management .finance-label {
      color: #666;
      font-size: 12px;
    }
    
    #sales-management .finance-value {
      font-weight: bold;
      font-size: 12px;
    }
    
    #sales-management .profit-positive {
      color: #28a745;
    }
    
    #sales-management .profit-negative {
      color: #dc3545;
    }
    
    /* è¨­å‚™å¡ç‰‡æ¨£å¼ */
    #sales-management .sales-card {
      background: white;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    #sales-management .sales-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid #f0f0f0;
    }
    
    #sales-management .sales-card-title {
      display: flex;
      align-items: center;
      gap: 18px;
    }
    
    #sales-management .sales-avatar {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: bold;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }
    
    #sales-management .sales-info h4 {
      margin: 0 0 8px 0;
      color: #2c3e50;
      font-size: 20px;
      font-weight: 600;
    }
    
    #sales-management .sales-info p {
      margin: 0;
      color: #7f8c8d;
      font-size: 14px;
    }
    
    #sales-management .sales-card-actions {
      display: flex;
      gap: 12px;
    }
    
    #sales-management .btn-edit,
    #sales-management .btn-delete {
      padding: 8px 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    
    #sales-management .btn-edit {
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      color: white;
      box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3);
    }
    #sales-management .btn-edit:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(40, 167, 69, 0.4);
    }
    
    #sales-management .btn-delete {
      background: linear-gradient(135deg, #dc3545 0%, #e74c3c 100%);
      color: white;
      box-shadow: 0 2px 8px rgba(220, 53, 69, 0.3);
    }
    #sales-management .btn-delete:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(220, 53, 69, 0.4);
    }
    
    #sales-management .sales-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-bottom: 15px;
    }
    
    #sales-management .detail-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #f0f0f0;
    }
    
    #sales-management .detail-label {
      color: #666;
      font-size: 14px;
    }
    
    #sales-management .detail-value {
      font-weight: bold;
      color: #333;
    }
    
    #sales-management .password-logs {
      margin-top: 15px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 6px;
    }
    
    #sales-management .password-logs h5 {
      margin: 0 0 10px 0;
      color: #333;
      font-size: 14px;
    }
    
    #sales-management .password-logs ul {
      margin: 0;
      padding-left: 20px;
      font-size: 12px;
      color: #666;
    }
    
    /* è¼‰å…¥å’ŒéŒ¯èª¤ç‹€æ…‹ */
    #sales-management .loading,
    #sales-management .error,
    #sales-management .no-data {
      text-align: center;
      padding: 40px 20px;
      color: #666;
    }
    
    #sales-management .error h3 {
      color: #dc3545;
      margin-bottom: 10px;
    }
    
    #sales-management .no-data h3 {
      color: #666;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <button data-page="dashboard">å„€è¡¨æ¿</button>
    <button data-page="list">å®¢æˆ¶åˆ—è¡¨</button>
    <button data-page="add">æ–°å¢å®¢æˆ¶</button>
    <button data-page="table">å¸³è¡¨</button>

    <button data-page="logs">æ“ä½œæ—¥èªŒ</button>
    <button data-page="sales-management">è¨­å‚™ç®¡ç†</button>
  </div>
  <div class="main">

    <!-- å„€è¡¨æ¿å…§å®¹ -->
    <div id="dashboard" class="dashboard-container page active">
      <!-- å„€è¡¨æ¿æ¨™é¡Œ -->
      <div class="dashboard-header">
        <div class="dashboard-title">
          <h2>æ™ºèƒ½å„€è¡¨æ¿</h2>
          <div class="dashboard-subtitle">å¯¦æ™‚ç›£æ§æ¥­å‹™æ•¸æ“šï¼Œæ™ºèƒ½åˆ†æè¶¨å‹¢</div>
        </div>
        <div class="dashboard-actions">
          <button class="refresh-btn" onclick="loadDashboard()">
            <span>ğŸ”„</span>
            <span>åˆ·æ–°</span>
          </button>
          <button class="export-btn" onclick="exportDashboardData()">
            <span>ğŸ“Š</span>
            <span>å°å‡º</span>
          </button>
        </div>
      </div>
      
      <!-- æ™ºèƒ½æ§åˆ¶é¢æ¿ -->
      <div class="dashboard-controls">
        <div class="control-section">
          <div class="date-range-picker">
            <div class="date-input-group">
              <label>èµ·å§‹æ—¥æœŸ</label>
              <input type="date" id="dashboard-start-date" class="date-input">
            </div>
            <div class="date-input-group">
              <label>çµæŸæ—¥æœŸ</label>
              <input type="date" id="dashboard-end-date" class="date-input">
            </div>
            <button id="dashboard-date-search-btn" class="search-btn">
              <span class="icon">ğŸ”</span> æŸ¥è©¢
            </button>
            <button id="dashboard-reset-btn" class="reset-btn">
              <span class="icon">ğŸ”„</span> é‡ç½®
            </button>
          </div>
        </div>
        
        <div class="view-controls">
          <div class="view-section">
            <div class="section-label">é¡¯ç¤ºæ–¹å¼</div>
            <div class="view-toggle">
              <button id="view-month-btn" class="view-btn active" data-view="month">
                <span class="icon">ğŸ“…</span> æœˆ
              </button>
              <button id="view-day-btn" class="view-btn" data-view="day">
                <span class="icon">ğŸ“†</span> æ—¥
              </button>
              <button id="view-week-btn" class="view-btn" data-view="week">
                <span class="icon">ğŸ“Š</span> é€±
              </button>
            </div>
          </div>
          
          <div class="filter-section">
            <div class="section-label">æ™‚é–“ç¯„åœ</div>
            <div class="quick-filters">
              <button class="filter-chip active" data-period="all">å…¨éƒ¨</button>
              <button class="filter-chip" data-period="today">ä»Šæ—¥</button>
              <button class="filter-chip" data-period="week">æœ¬é€±</button>
              <button class="filter-chip" data-period="month">æœ¬æœˆ</button>
              <button class="filter-chip" data-period="quarter">æœ¬å­£</button>
            </div>
          </div>
        </div>
      </div>

      <!-- æ ¸å¿ƒæŒ‡æ¨™å¡ç‰‡ -->
      <div class="kpi-grid">
        <div class="kpi-card primary">
          <div class="kpi-header">
            <div class="kpi-icon">ğŸ‘¥</div>
            <div class="kpi-trend positive">
              <span class="trend-icon">â†—</span>
              <span class="trend-value">+12%</span>
            </div>
          </div>
          <div class="kpi-content">
            <h3>ç¸½å®¢æˆ¶æ•¸</h3>
            <div class="kpi-value" id="total-customers">0</div>
            <div class="kpi-detail">
              <span class="detail-item">æ´»èº: <span id="active-customers">0</span></span>
              <span class="detail-item">æ–°å¢: <span id="new-customers">0</span></span>
            </div>
          </div>
        </div>
        
        <div class="kpi-card success">
          <div class="kpi-header">
            <div class="kpi-icon">ğŸ’°</div>
            <div class="kpi-trend positive">
              <span class="trend-icon">â†—</span>
              <span class="trend-value">+8%</span>
            </div>
          </div>
          <div class="kpi-content">
            <h3>ç´¯ç©æ¥­ç¸¾</h3>
            <div class="kpi-value" id="accumulated-sales">0å…ƒ</div>
            <div class="kpi-detail">
              <span class="detail-item">æœ¬æœˆ: <span id="monthly-sales">0å…ƒ</span></span>
              <span class="detail-item">å¹³å‡: <span id="avg-sales">0å…ƒ</span></span>
            </div>
          </div>
        </div>
        
        <div class="kpi-card warning">
          <div class="kpi-header">
            <div class="kpi-icon">â°</div>
            <div class="kpi-trend negative">
              <span class="trend-icon">â†˜</span>
              <span class="trend-value">-5%</span>
            </div>
          </div>
          <div class="kpi-content">
            <h3>å¾…ç¹³æ¬¾</h3>
            <div class="kpi-value" id="pending-payments">0</div>
            <div class="kpi-detail">
              <span class="detail-item">é€¾æœŸ: <span id="overdue-count">0</span></span>
              <span class="detail-item">é‡‘é¡: <span id="overdue-amount">0å…ƒ</span></span>
            </div>
          </div>
        </div>
        
        <div class="kpi-card danger">
          <div class="kpi-header">
            <div class="kpi-icon">âš ï¸</div>
            <div class="kpi-trend negative">
              <span class="trend-icon">â†—</span>
              <span class="trend-value">+2%</span>
            </div>
          </div>
          <div class="kpi-content">
            <h3>å‘†å¸³ç‡</h3>
            <div class="kpi-value" id="buyback-locked-rate">0%</div>
            <div class="kpi-detail">
              <span class="detail-item">äººæ•¸: <span id="locked-customers">0äºº</span></span>
              <span class="detail-item">é‡‘é¡: <span id="locked-amount">0å…ƒ</span></span>
            </div>
          </div>
        </div>
        
        <div class="kpi-card info">
          <div class="kpi-header">
            <div class="kpi-icon">âœ…</div>
            <div class="kpi-trend positive">
              <span class="trend-icon">â†—</span>
              <span class="trend-value">+15%</span>
            </div>
          </div>
          <div class="kpi-content">
            <h3>å·²è²·å›ç‡</h3>
            <div class="kpi-value" id="buyback-rate">0%</div>
            <div class="kpi-detail">
              <span class="detail-item">äººæ•¸: <span id="buyback-customers">0äºº</span></span>
              <span class="detail-item">æ”¶ç›Š: <span id="buyback-profit">0å…ƒ</span></span>
            </div>
          </div>
        </div>
        
        <div class="kpi-card profit">
          <div class="kpi-header">
            <div class="kpi-icon">ğŸ’µ</div>
            <div class="kpi-trend positive">
              <span class="trend-icon">â†—</span>
              <span class="trend-value">+18%</span>
            </div>
          </div>
          <div class="kpi-content">
            <h3>æ·¨åˆ©æ½¤</h3>
            <div class="kpi-value" id="profit-summary">0å…ƒ</div>
            <div class="kpi-detail">
              <span class="detail-item">æ¯›åˆ©ç‡: <span id="profit-margin">0%</span></span>
              <span class="detail-item">ROI: <span id="roi-rate">0%</span></span>
            </div>
          </div>
        </div>
      </div>

      <!-- åœ–è¡¨åˆ†æå€åŸŸ -->
      <div class="charts-section">
        <!-- ä¸»è¦è¶¨å‹¢åœ– -->
        <div class="chart-row">
          <div class="chart-container large">
            <div class="chart-header">
              <h3>æ¥­å‹™è¶¨å‹¢åˆ†æ</h3>
              <div class="chart-controls">
                <button class="chart-btn active" data-metric="customers">å®¢æˆ¶</button>
                <button class="chart-btn" data-metric="revenue">ç‡Ÿæ”¶</button>
                <button class="chart-btn" data-metric="payments">ä»˜æ¬¾</button>
              </div>
            </div>
            <div class="chart-content">
              <canvas id="dashboard-chart"></canvas>
            </div>
          </div>
        </div>

        <!-- é‡‘é¡åˆ†æåœ– -->
        <div class="chart-row">
          <div class="chart-container large">
            <div class="chart-header">
              <h3>é‡‘é¡åˆ†æ</h3>
              <div class="chart-summary">
                <div class="summary-item">
                  <span class="summary-label">ç¸½ç‡Ÿæ”¶</span>
                  <span class="summary-value" id="total-revenue">0</span>
                </div>
                <div class="summary-item">
                  <span class="summary-label">ç¸½åˆ©æ½¤</span>
                  <span class="summary-value" id="total-profit">0</span>
                </div>
                <div class="summary-item">
                  <span class="summary-label">ç¸½æˆæœ¬</span>
                  <span class="summary-value" id="total-cost">0</span>
                </div>
              </div>
            </div>
            <div class="chart-content">
              <canvas id="amount-chart"></canvas>
            </div>
          </div>
        </div>

        <!-- åˆ†å¸ƒåœ–è¡¨ -->
        <div class="chart-row">
          <div class="chart-container medium">
            <div class="chart-header">
              <h3>æ©Ÿå‹åˆ†å¸ƒ</h3>
            </div>
            <div class="chart-content">
              <canvas id="model-chart"></canvas>
            </div>
          </div>
          <div class="chart-container medium">
            <div class="chart-header">
              <h3>åœ°å€åˆ†å¸ƒ</h3>
            </div>
            <div class="chart-content">
              <canvas id="region-chart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- å¯¦æ™‚ç›£æ§ -->
      <div class="real-time-section">
        <div class="real-time-indicator">
          <div class="pulse"></div>
          <span>å¯¦æ™‚ç›£æ§</span>
        </div>
        <div class="real-time-stats">
          <div class="rt-stat">
            <span class="rt-label">ä»Šæ—¥æ–°å¢</span>
            <span class="rt-value" id="today-new">0</span>
          </div>
          <div class="rt-stat">
            <span class="rt-label">ä»Šæ—¥ä»˜æ¬¾</span>
            <span class="rt-value" id="today-payments">0</span>
          </div>
          <div class="rt-stat">
            <span class="rt-label">é€¾æœŸè­¦å ±</span>
            <span class="rt-value" id="overdue-alerts">0</span>
          </div>
          <div class="rt-stat">
            <span class="rt-label">ç³»çµ±ç‹€æ…‹</span>
            <span class="rt-value" id="system-status">æ­£å¸¸</span>
          </div>
        </div>
      </div>

      <!-- é¢¨éšªè©•ä¼° -->
      <div class="risk-section">
        <div class="risk-level-indicator">
          <h3>é¢¨éšªè©•ä¼°</h3>
          <div class="risk-level" id="overall-risk-level">ä¸­ç­‰</div>
        </div>
        <div class="risk-metrics">
          <div class="risk-metric">
            <div class="risk-label">é€¾æœŸç‡</div>
            <div class="risk-value" id="overdue-rate">0%</div>
            <div class="risk-bar">
              <div class="risk-fill" id="overdue-fill" style="width: 0%"></div>
            </div>
          </div>
          <div class="risk-metric">
            <div class="risk-label">å‘†å¸³ç‡</div>
            <div class="risk-value" id="bad-debt-rate">0%</div>
            <div class="risk-bar">
              <div class="risk-fill" id="bad-debt-fill" style="width: 0%"></div>
            </div>
          </div>
          <div class="risk-metric">
            <div class="risk-label">æµå¤±ç‡</div>
            <div class="risk-value" id="churn-rate">0%</div>
            <div class="risk-bar">
              <div class="risk-fill" id="churn-fill" style="width: 0%"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- æ™ºèƒ½åˆ†æå»ºè­° -->
      <div class="insights-section">
        <div class="insights-header">
          <h3>æ™ºèƒ½åˆ†æå»ºè­°</h3>
          <div class="insights-controls">
            <button class="insight-btn active" data-type="all">å…¨éƒ¨</button>
            <button class="insight-btn" data-type="warning">è­¦å‘Š</button>
            <button class="insight-btn" data-type="suggestion">å»ºè­°</button>
            <button class="insight-btn" data-type="success">æˆåŠŸ</button>
          </div>
        </div>
        <div class="insights-grid">
          <div class="insight-card warning">
            <div class="insight-icon">âš ï¸</div>
            <div class="insight-content">
              <h4>é€¾æœŸé¢¨éšªæé†’</h4>
              <p>æœ‰3å€‹å®¢æˆ¶å­˜åœ¨é€¾æœŸé¢¨éšªï¼Œå»ºè­°åŠæ™‚è·Ÿé€²</p>
            </div>
            <div class="insight-actions">
              <button class="action-btn">æŸ¥çœ‹è©³æƒ…</button>
            </div>
          </div>
          <div class="insight-card suggestion">
            <div class="insight-icon">ğŸ’¡</div>
            <div class="insight-content">
              <h4>æ¥­å‹™å„ªåŒ–å»ºè­°</h4>
              <p>å»ºè­°åŠ å¼·iPhone 12ç³»åˆ—çš„æ¨å»£ï¼Œå¸‚å ´éœ€æ±‚è¼ƒé«˜</p>
            </div>
            <div class="insight-actions">
              <button class="action-btn">æ¡ç´å»ºè­°</button>
            </div>
          </div>
          <div class="insight-card success">
            <div class="insight-icon">âœ…</div>
            <div class="insight-content">
              <h4>æ¥­ç¸¾é”æ¨™</h4>
              <p>æœ¬æœˆæ–°å¢å®¢æˆ¶æ•¸å·²é”æ¨™ï¼Œè¡¨ç¾å„ªç§€</p>
            </div>
            <div class="insight-actions">
              <button class="action-btn">æŸ¥çœ‹å ±å‘Š</button>
            </div>
          </div>
        </div>
      </div>

      <!-- å¿«é€Ÿæ“ä½œé¢æ¿ -->
      <div class="quick-actions-panel">
        <h3>å¿«é€Ÿæ“ä½œ</h3>
        <div class="quick-actions-grid">
          <div class="quick-action" onclick="dashboardQuickAction('add-customer')">
            <div class="action-icon">â•</div>
            <div class="action-text">æ–°å¢å®¢æˆ¶</div>
          </div>
          <div class="quick-action" onclick="dashboardQuickAction('payment-record')">
            <div class="action-icon">ğŸ’°</div>
            <div class="action-text">æ”¶æ¬¾è¨˜éŒ„</div>
          </div>
          <div class="quick-action" onclick="dashboardQuickAction('export-report')">
            <div class="action-icon">ğŸ“Š</div>
            <div class="action-text">å ±è¡¨å°å‡º</div>
          </div>
          <div class="quick-action" onclick="dashboardQuickAction('system-settings')">
            <div class="action-icon">âš™ï¸</div>
            <div class="action-text">ç³»çµ±è¨­ç½®</div>
          </div>
        </div>
      </div>
    </div>
    <div id="list" class="page">
      <h2>å®¢æˆ¶åˆ—è¡¨</h2>
      
      <!-- å¿«é€Ÿæ“ä½œæ  -->
      <div class="quick-actions">
        <button class="quick-action-btn primary" onclick="showAddCustomerModal()">
          <span class="icon">â•</span>æ–°å¢å®¢æˆ¶
        </button>
        <button class="quick-action-btn" onclick="exportCustomerData()">
          <span class="icon">ğŸ“Š</span>åŒ¯å‡ºè³‡æ–™
        </button>
        <button class="quick-action-btn" onclick="showBulkPaymentModal()">
          <span class="icon">ğŸ’°</span>æ‰¹é‡ç¹³æ¬¾
        </button>
      </div>

      <!-- æ™ºèƒ½ç­›é€‰å™¨ -->
      <div class="smart-filter">
        <div class="search-box">
          <input type="text" id="search-input" placeholder="æœå°‹å§“åã€èº«åˆ†è­‰ã€æ‰‹æ©Ÿè™Ÿç¢¼..." />
          <span class="search-icon">ğŸ”</span>
        </div>
        
        <div class="filter-tabs">
          <button class="filter-tab active" data-filter="all">
            <span class="tab-icon">ğŸ“‹</span>å…¨éƒ¨
            <span class="tab-count" id="count-all">0</span>
          </button>
          <button class="filter-tab" data-filter="renting">
            <span class="tab-icon">ğŸ“±</span>ç§Ÿè³ƒä¸­
            <span class="tab-count" id="count-renting">0</span>
          </button>
          <button class="filter-tab" data-filter="overdue">
            <span class="tab-icon">âš ï¸</span>é€¾æœŸ
            <span class="tab-count" id="count-overdue">0</span>
          </button>
          <button class="filter-tab" data-filter="due-today">
            <span class="tab-icon">ğŸ“…</span>æœ¬æ—¥æ‡‰ç¹³
            <span class="tab-count" id="count-due-today">0</span>
          </button>
          <button class="filter-tab" data-filter="locked">
            <span class="tab-icon">ğŸ”’</span>å‘†å¸³
            <span class="tab-count" id="count-locked">0</span>
          </button>
          <button class="filter-tab" data-filter="buyback">
            <span class="tab-icon">âœ…</span>å·²è²·å›
            <span class="tab-count" id="count-buyback">0</span>
          </button>
        </div>
      </div>

      <!-- å®¢æˆ·å¡ç‰‡å®¹å™¨ -->
      <div class="customer-grid" id="customer-grid">
        <!-- åŠ¨æ€ç”Ÿæˆçš„å®¢æˆ·å¡ç‰‡ -->
      </div>

      <!-- åˆ†é¡µæ§ä»¶ -->
      <div class="pagination" id="pagination">
        <button class="pagination-btn" id="prev-page">ä¸Šä¸€é¡µ</button>
        <span class="page-info" id="page-info">ç¬¬ 1 é¡µï¼Œå…± 1 é¡µ</span>
        <button class="pagination-btn" id="next-page">ä¸‹ä¸€é¡µ</button>
      </div>
    </div>
    <div id="add" class="page">
      <h2>æ–°å¢å®¢æˆ¶</h2>
      <form id="add-customer-form" enctype="multipart/form-data">
        <!-- åŸºæœ¬è³‡æ–™ -->
        <div class="form-section-group">
          <h3>åŸºæœ¬è³‡æ–™</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="name" class="required">å§“å</label>
              <input type="text" id="name" name="name" required />
            </div>
            <div class="form-group">
              <label for="idNumber" class="required">èº«åˆ†è­‰å­—è™Ÿ</label>
              <input type="text" id="idNumber" name="idNumber" required />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="phone" class="required">æ‰‹æ©Ÿè™Ÿç¢¼</label>
              <input type="tel" id="phone" name="phone" required />
            </div>
            <div class="form-group">
              <label for="birthday">ç”Ÿæ—¥</label>
              <input type="date" id="birthday" name="birthday" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="occupation">è·æ¥­</label>
              <input type="text" id="occupation" name="occupation" />
            </div>
            <div class="form-group">
              <label for="source">ä¾†æºç®¡é“</label>
              <input type="text" id="source" name="source" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="emergencyContactName">ç·Šæ€¥è¯çµ¡äºº</label>
              <input type="text" id="emergencyContactName" name="emergencyContactName" placeholder="å§“å" />
            </div>
            <div class="form-group">
              <label for="emergencyContactPhone">ç·Šæ€¥è¯çµ¡é›»è©±</label>
              <input type="tel" id="emergencyContactPhone" name="emergencyContactPhone" placeholder="é›»è©±" />
            </div>
          </div>
        </div>

        <!-- è¯çµ¡è³‡è¨Š -->
        <div class="form-section-group">
          <h3>è¯çµ¡è³‡è¨Š</h3>
          <div class="address-group">
            <div class="form-group">
              <label for="city" class="required">ç¸£å¸‚</label>
              <select id="city" name="city" required>
                <option value="">è«‹é¸æ“‡ç¸£å¸‚</option>
                <option value="å°åŒ—å¸‚">å°åŒ—å¸‚</option>
                <option value="æ–°åŒ—å¸‚">æ–°åŒ—å¸‚</option>
                <option value="æ¡ƒåœ’å¸‚">æ¡ƒåœ’å¸‚</option>
                <option value="å°ä¸­å¸‚">å°ä¸­å¸‚</option>
                <option value="å°å—å¸‚">å°å—å¸‚</option>
                <option value="é«˜é›„å¸‚">é«˜é›„å¸‚</option>
                <option value="åŸºéš†å¸‚">åŸºéš†å¸‚</option>
                <option value="æ–°ç«¹å¸‚">æ–°ç«¹å¸‚</option>
                <option value="å˜‰ç¾©å¸‚">å˜‰ç¾©å¸‚</option>
                <option value="æ–°ç«¹ç¸£">æ–°ç«¹ç¸£</option>
                <option value="è‹—æ —ç¸£">è‹—æ —ç¸£</option>
                <option value="å½°åŒ–ç¸£">å½°åŒ–ç¸£</option>
                <option value="å—æŠ•ç¸£">å—æŠ•ç¸£</option>
                <option value="é›²æ—ç¸£">é›²æ—ç¸£</option>
                <option value="å˜‰ç¾©ç¸£">å˜‰ç¾©ç¸£</option>
                <option value="å±æ±ç¸£">å±æ±ç¸£</option>
                <option value="å®œè˜­ç¸£">å®œè˜­ç¸£</option>
                <option value="èŠ±è“®ç¸£">èŠ±è“®ç¸£</option>
                <option value="å°æ±ç¸£">å°æ±ç¸£</option>
                <option value="æ¾æ¹–ç¸£">æ¾æ¹–ç¸£</option>
                <option value="é‡‘é–€ç¸£">é‡‘é–€ç¸£</option>
                <option value="é€£æ±Ÿç¸£">é€£æ±Ÿç¸£</option>
              </select>
            </div>
            <div class="form-group">
              <label for="district" class="required">åœ°å€</label>
              <input type="text" id="district" name="district" placeholder="è«‹è¼¸å…¥åœ°å€" required />
            </div>
            <div class="form-group">
              <label for="street" class="required">è¡—é“åœ°å€</label>
              <input type="text" id="street" name="street" placeholder="è«‹è¼¸å…¥è¡—é“ã€å··å¼„ã€é–€ç‰Œç­‰" required />
            </div>
          </div>
          <div class="form-group">
            <label><input type="checkbox" id="sameAsRegistered" /> é€šè¨Šåœ°å€åŒæˆ¶ç±</label>
          </div>
          <div class="form-group">
            <label for="currentAddress" class="required">é€šè¨Šåœ°å€</label>
            <input type="text" id="currentAddress" name="currentAddress" required />
          </div>
        </div>

        <!-- ç§Ÿè³ƒè³‡è¨Š -->
        <div class="form-section-group">
          <h3>ç§Ÿè³ƒè³‡è¨Š</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="model" class="required">æ‰‹æ©Ÿå‹è™Ÿ</label>
              <select id="model" name="model" required>
                <option value="">è«‹é¸æ“‡å‹è™Ÿ</option>
                <option value="iPhone 12 64GB">iPhone 12 64GB</option>
                <option value="iPhone 12 128GB">iPhone 12 128GB</option>
                <option value="iPhone 12 256GB">iPhone 12 256GB</option>
                <option value="iPhone 12 mini 64GB">iPhone 12 mini 64GB</option>
                <option value="iPhone 12 mini 128GB">iPhone 12 mini 128GB</option>
                <option value="iPhone 12 mini 256GB">iPhone 12 mini 256GB</option>
                <option value="iPhone 12 Pro 128GB">iPhone 12 Pro 128GB</option>
                <option value="iPhone 12 Pro 256GB">iPhone 12 Pro 256GB</option>
                <option value="iPhone 12 Pro 512GB">iPhone 12 Pro 512GB</option>
                <option value="iPhone 12 Pro Max 128GB">iPhone 12 Pro Max 128GB</option>
                <option value="iPhone 12 Pro Max 256GB">iPhone 12 Pro Max 256GB</option>
                <option value="iPhone 12 Pro Max 512GB">iPhone 12 Pro Max 512GB</option>
                <option value="iPhone 13 128GB">iPhone 13 128GB</option>
                <option value="iPhone 13 256GB">iPhone 13 256GB</option>
                <option value="iPhone 13 512GB">iPhone 13 512GB</option>
                <option value="iPhone 13 mini 128GB">iPhone 13 mini 128GB</option>
                <option value="iPhone 13 mini 256GB">iPhone 13 mini 256GB</option>
                <option value="iPhone 13 mini 512GB">iPhone 13 mini 512GB</option>
                <option value="iPhone 13 Pro 128GB">iPhone 13 Pro 128GB</option>
                <option value="iPhone 13 Pro 256GB">iPhone 13 Pro 256GB</option>
                <option value="iPhone 13 Pro 512GB">iPhone 13 Pro 512GB</option>
                <option value="iPhone 13 Pro 1TB">iPhone 13 Pro 1TB</option>
                <option value="iPhone 13 Pro Max 128GB">iPhone 13 Pro Max 128GB</option>
                <option value="iPhone 13 Pro Max 256GB">iPhone 13 Pro Max 256GB</option>
                <option value="iPhone 13 Pro Max 512GB">iPhone 13 Pro Max 512GB</option>
                <option value="iPhone 13 Pro Max 1TB">iPhone 13 Pro Max 1TB</option>
                <option value="iPhone SE (ç¬¬ä¸‰ä»£) 64GB">iPhone SE (ç¬¬ä¸‰ä»£) 64GB</option>
                <option value="iPhone SE (ç¬¬ä¸‰ä»£) 128GB">iPhone SE (ç¬¬ä¸‰ä»£) 128GB</option>
                <option value="iPhone SE (ç¬¬ä¸‰ä»£) 256GB">iPhone SE (ç¬¬ä¸‰ä»£) 256GB</option>
                <option value="iPhone 14 128GB">iPhone 14 128GB</option>
                <option value="iPhone 14 256GB">iPhone 14 256GB</option>
                <option value="iPhone 14 512GB">iPhone 14 512GB</option>
                <option value="iPhone 14 Plus 128GB">iPhone 14 Plus 128GB</option>
                <option value="iPhone 14 Plus 256GB">iPhone 14 Plus 256GB</option>
                <option value="iPhone 14 Plus 512GB">iPhone 14 Plus 512GB</option>
                <option value="iPhone 14 Pro 128GB">iPhone 14 Pro 128GB</option>
                <option value="iPhone 14 Pro 256GB">iPhone 14 Pro 256GB</option>
                <option value="iPhone 14 Pro 512GB">iPhone 14 Pro 512GB</option>
                <option value="iPhone 14 Pro 1TB">iPhone 14 Pro 1TB</option>
                <option value="iPhone 14 Pro Max 128GB">iPhone 14 Pro Max 128GB</option>
                <option value="iPhone 14 Pro Max 256GB">iPhone 14 Pro Max 256GB</option>
                <option value="iPhone 14 Pro Max 512GB">iPhone 14 Pro Max 512GB</option>
                <option value="iPhone 14 Pro Max 1TB">iPhone 14 Pro Max 1TB</option>
                <option value="iPhone 15 128GB">iPhone 15 128GB</option>
                <option value="iPhone 15 256GB">iPhone 15 256GB</option>
                <option value="iPhone 15 512GB">iPhone 15 512GB</option>
                <option value="iPhone 15 Plus 128GB">iPhone 15 Plus 128GB</option>
                <option value="iPhone 15 Plus 256GB">iPhone 15 Plus 256GB</option>
                <option value="iPhone 15 Plus 512GB">iPhone 15 Plus 512GB</option>
                <option value="iPhone 15 Pro 128GB">iPhone 15 Pro 128GB</option>
                <option value="iPhone 15 Pro 256GB">iPhone 15 Pro 256GB</option>
                <option value="iPhone 15 Pro 512GB">iPhone 15 Pro 512GB</option>
                <option value="iPhone 15 Pro 1TB">iPhone 15 Pro 1TB</option>
                <option value="iPhone 15 Pro Max 256GB">iPhone 15 Pro Max 256GB</option>
                <option value="iPhone 15 Pro Max 512GB">iPhone 15 Pro Max 512GB</option>
                <option value="iPhone 15 Pro Max 1TB">iPhone 15 Pro Max 1TB</option>
                <option value="iPhone 16 128GB">iPhone 16 128GB</option>
                <option value="iPhone 16 256GB">iPhone 16 256GB</option>
                <option value="iPhone 16 512GB">iPhone 16 512GB</option>
                <option value="iPhone 16 1TB">iPhone 16 1TB</option>
                <option value="iPhone 16 Plus 128GB">iPhone 16 Plus 128GB</option>
                <option value="iPhone 16 Plus 256GB">iPhone 16 Plus 256GB</option>
                <option value="iPhone 16 Plus 512GB">iPhone 16 Plus 512GB</option>
                <option value="iPhone 16 Plus 1TB">iPhone 16 Plus 1TB</option>
                <option value="iPhone 16 Pro 128GB">iPhone 16 Pro 128GB</option>
                <option value="iPhone 16 Pro 256GB">iPhone 16 Pro 256GB</option>
                <option value="iPhone 16 Pro 512GB">iPhone 16 Pro 512GB</option>
                <option value="iPhone 16 Pro 1TB">iPhone 16 Pro 1TB</option>
                <option value="iPhone 16 Pro Max 256GB">iPhone 16 Pro Max 256GB</option>
                <option value="iPhone 16 Pro Max 512GB">iPhone 16 Pro Max 512GB</option>
                <option value="iPhone 16 Pro Max 1TB">iPhone 16 Pro Max 1TB</option>
                <option value="iPhone 16e 128GB">iPhone 16e 128GB</option>
                <option value="iPhone 16e 256GB">iPhone 16e 256GB</option>
                <option value="iPhone 16e 512GB">iPhone 16e 512GB</option>
              </select>
            </div>
            <div class="form-group">
              <label for="imei" class="required">IMEI</label>
              <input type="text" id="imei" name="imei" required />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="serialNumber" class="required">åºè™Ÿ</label>
              <input type="text" id="serialNumber" name="serialNumber" required />
            </div>
            <div class="form-group">
              <label for="screenPassword">è¢å¹•å¯†ç¢¼</label>
              <input type="text" id="screenPassword" name="screenPassword" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="contractDate" class="required">åˆç´„èµ·å§‹æ—¥</label>
              <input type="date" id="contractDate" name="contractDate" required />
            </div>
            <div class="form-group">
              <label for="paymentCycleDays" class="required">ç¹³æ¬¾é€±æœŸï¼ˆå¤©ï¼‰</label>
              <input type="number" id="paymentCycleDays" name="paymentCycleDays" min="1" value="30" required />
            </div>
          </div>
        </div>

        <!-- è²¡å‹™è³‡è¨Š -->
        <div class="form-section-group">
          <h3>è²¡å‹™è³‡è¨Š</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="salePrice" class="required">è²·è³£åƒ¹é‡‘</label>
              <input type="number" id="salePrice" name="salePrice" required />
            </div>
            <div class="form-group">
              <label for="rent" class="required">ç§Ÿé‡‘</label>
              <input type="number" id="rent" name="rent" required />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="bank" class="required">éŠ€è¡Œ</label>
              <input type="text" id="bank" name="bank" required />
            </div>
            <div class="form-group">
              <label for="bankAccountName" class="required">æˆ¶å</label>
              <input type="text" id="bankAccountName" name="bankAccountName" required />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="bankAccountNumber" class="required">å¸³è™Ÿ</label>
              <input type="text" id="bankAccountNumber" name="bankAccountNumber" required />
            </div>
            <div class="form-group">
              <label for="salesId">è¨­å‚™</label>
              <select id="salesId" name="salesId">
                <option value="">è«‹é¸æ“‡è¨­å‚™</option>
                <!-- åŠ¨æ€åŠ è½½è®¾å¤‡é€‰é¡¹ -->
              </select>
            </div>
          </div>
        </div>

        <!-- æª”æ¡ˆä¸Šå‚³ -->
        <div class="form-section-group">
          <h3>æª”æ¡ˆä¸Šå‚³</h3>
          <div class="file-upload-grid">
            <div class="file-upload-item">
              <label for="idFront">èº«åˆ†è­‰æ­£é¢</label>
              <input type="file" id="idFront" name="idFront" accept="image/*" />
              <div class="file-preview" id="idFront-preview"></div>
            </div>
            <div class="file-upload-item">
              <label for="idBack">èº«åˆ†è­‰åé¢</label>
              <input type="file" id="idBack" name="idBack" accept="image/*" />
              <div class="file-preview" id="idBack-preview"></div>
            </div>
            <div class="file-upload-item">
              <label for="billPhoto">å­˜æ‘ºå°é¢</label>
              <input type="file" id="billPhoto" name="billPhoto" accept="image/*" />
              <div class="file-preview" id="billPhoto-preview"></div>
            </div>
            <div class="file-upload-item">
              <label for="contractPdf">åˆç´„PDF</label>
              <input type="file" id="contractPdf" name="contractPdf" accept=".pdf" />
              <div class="file-preview" id="contractPdf-preview"></div>
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="submit-btn">æ–°å¢å®¢æˆ¶</button>
        </div>
      </form>
    </div>
    <div id="table" class="page">
      <h2>å¸³å‹™è¡¨æ ¼</h2>
      <div id="table-container"></div>
    </div>
    <div id="logs" class="page">
      <h2>æ“ä½œæ—¥èªŒ</h2>
      <div id="logs-search-bar" style="margin-bottom:16px;">
        <label>èµ·å§‹æ—¥ <input type="date" id="logs-start-date"></label>
        <label>çµæŸæ—¥ <input type="date" id="logs-end-date"></label>
        <label>æ“ä½œé¡å‹ <input type="text" id="logs-action" placeholder="å¦‚ï¼šç•°å¸¸/æ–°å¢/ç·¨è¼¯"></label>
        <label>ç•°å¸¸é¡å‹ <input type="text" id="logs-type" placeholder="å¦‚ï¼šé©—è­‰å¤±æ•—/catch"></label>
        <label>æ“ä½œè€… <input type="text" id="logs-user" placeholder="å¦‚ï¼šadmin"></label>
        <label>å®¢æˆ¶ID <input type="text" id="logs-customer-id"></label>
        <label>å®¢æˆ¶å§“å <input type="text" id="logs-customer-name"></label>
        <label>é—œéµå­— <input type="text" id="logs-keyword" placeholder="å¯æœå°‹è¨Šæ¯/å…§å®¹"></label>
        <button id="logs-search-btn">æŸ¥è©¢</button>
        <button id="logs-reset-btn">é‡è¨­</button>
      </div>
      <div id="logs-container"></div>
    </div>

    <!-- è¨­å‚™ç®¡ç†ç³»çµ± å…§åµŒåˆ†é  -->
    <div id="sales-management" class="page">
      <div class="container">
        <div class="header">
            <h1>è¨­å‚™ç®¡ç†ç³»çµ±</h1>
        </div>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">ğŸ‘¥</div>
                <div class="stat-number" id="total-sales">0</div>
                <div class="stat-label">ç¸½è¨­å‚™æ•¸</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ“±</div>
                <div class="stat-number" id="active-sales">0</div>
                <div class="stat-label">æ´»èºè¨­å‚™</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ‘¤</div>
                <div class="stat-number" id="total-customers">0</div>
                <div class="stat-label">ç¸½å®¢æˆ¶æ•¸</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ“Š</div>
                <div class="stat-number" id="avg-customers">0</div>
                <div class="stat-label">å¹³å‡å®¢æˆ¶æ•¸</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ’°</div>
                <div class="stat-number" id="sales-total-profit">0</div>
                <div class="stat-label">ç¸½æç›Š</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">âš ï¸</div>
                <div class="stat-number" id="overdue-customers">0</div>
                <div class="stat-label">é€¾æœŸå®¢æˆ¶æ•¸</div>
            </div>
        </div>
        <div class="main-content">
            <div class="sales-list-section">
                <div class="section-header">
                    <h2>è¨­å‚™åˆ—è¡¨</h2>
                    <button class="btn-primary" onclick="openSalesForm()">
                        <span>â•</span>æ–°å¢è¨­å‚™
                    </button>
                </div>
                <div id="sales-list" class="sales-grid">
                    <div class="loading">è¼‰å…¥ä¸­...</div>
                </div>
            </div>
            <div class="sales-form-sidebar" id="sales-form-sidebar" style="display: none;">
                <div class="form-header">
                    <h3 id="form-title">æ–°å¢è¨­å‚™</h3>
                    <button class="close-btn" onclick="closeSalesForm()">&times;</button>
                </div>
                <form id="sales-form">
                    <input type="hidden" id="sales-id" name="id">
                    <div class="form-group">
                        <label for="sales-name">å§“å *</label>
                        <input type="text" id="sales-name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="sales-phone">æ‰‹æ©Ÿè™Ÿç¢¼ *</label>
                        <input type="tel" id="sales-phone" name="phone" required>
                    </div>
                    <div class="form-group">
                        <label for="sales-findPhone">å¾©åŸå¯†é‘°/è™Ÿç¢¼</label>
                        <input type="text" id="sales-findPhone" name="findPhone" placeholder="å¾©åŸå¯†é‘°æˆ–è™Ÿç¢¼">
                    </div>
                    <div class="form-group">
                        <label for="sales-appleAccount">APPLEå¸³è™Ÿ *</label>
                        <input type="email" id="sales-appleAccount" name="appleAccount" required>
                    </div>
                    <div class="form-group">
                        <label for="sales-applePassword">APPLEå¯†ç¢¼ *</label>
                        <input type="password" id="sales-applePassword" name="applePassword" required>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn-primary" id="sales-save-btn">æ–°å¢</button>
                        <button type="button" class="btn-secondary" onclick="resetSalesForm()">å–æ¶ˆ</button>
                    </div>
                </form>
            </div>
        </div>
      </div>
    </div>


  </div>

  <div id="payment-modal" class="modal">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h3>ç¹³æ¬¾</h3>
      <div class="form-group">
        <label for="payment-amount">ç¹³æ¬¾é‡‘é¡</label>
        <input type="number" id="payment-amount" required />
      </div>
      <div class="form-group">
        <label for="payment-date">ç¹³æ¬¾æ—¥æœŸ</label>
        <input type="date" id="payment-date" required />
      </div>
      <button id="submit-payment">ç¢ºèªç¹³æ¬¾</button>
    </div>
  </div>

  <!-- ç·¨è¼¯å®¢æˆ¶ Modal -->
  <div id="edit-modal" class="modal">
    <div class="modal-content large">
      <span class="close-modal">&times;</span>
      <h3>ç·¨è¼¯å®¢æˆ¶</h3>
      <form id="edit-customer-form">
        <!-- å‹•æ…‹å¡«å……æ¬„ä½ -->
      </form>
    </div>
  </div>

  <!-- æ–°å¢å®¢æˆ¶ Modal -->
  <div id="add-customer-modal" class="modal">
    <div class="modal-content large">
      <span class="close-modal" id="close-add-modal">&times;</span>
      <h3>æ–°å¢å®¢æˆ¶</h3>
      <div class="modal-body">
        <p>è«‹ä½¿ç”¨ä¸»é é¢çš„ã€Œæ–°å¢å®¢æˆ¶ã€åŠŸèƒ½ä¾†æ–°å¢å®¢æˆ¶ã€‚</p>
        <button onclick="showPage('add')" class="btn-primary">å‰å¾€æ–°å¢å®¢æˆ¶é é¢</button>
      </div>
    </div>
  </div>

  <!-- æ‰¹é‡ç¹³æ¬¾ Modal -->
  <div id="bulk-payment-modal" class="modal">
    <div class="modal-content large">
      <span class="close-modal" id="close-bulk-modal">&times;</span>
      <h3>æ‰¹é‡ç¹³æ¬¾</h3>
      <div class="bulk-payment-content">
        <div class="bulk-payment-summary">
          <h4>ç¹³æ¬¾æ‘˜è¦</h4>
          <div class="summary-stats">
            <div class="stat-item">
              <span class="stat-label">é¸ä¸­å®¢æˆ¶</span>
              <span class="stat-value" id="selected-customers-count">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">ç¸½æ‡‰ç¹³é‡‘é¡</span>
              <span class="stat-value" id="total-due-amount">$0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">é€¾æœŸå®¢æˆ¶</span>
              <span class="stat-value" id="overdue-customers-count">0</span>
            </div>
          </div>
        </div>
        
        <div class="bulk-payment-form">
          <div class="form-group">
            <label for="bulk-payment-amount">ç¹³æ¬¾é‡‘é¡</label>
            <input type="number" id="bulk-payment-amount" placeholder="è¼¸å…¥ç¹³æ¬¾é‡‘é¡" />
          </div>
          <div class="form-group">
            <label for="bulk-payment-date">ç¹³æ¬¾æ—¥æœŸ</label>
            <input type="date" id="bulk-payment-date" value="" />
          </div>
          <div class="form-group">
            <label for="bulk-payment-note">å‚™è¨»</label>
            <textarea id="bulk-payment-note" placeholder="ç¹³æ¬¾å‚™è¨»"></textarea>
          </div>
        </div>

        <div class="bulk-payment-customers">
          <h4>é¸ä¸­å®¢æˆ¶åˆ—è¡¨</h4>
          <div class="customer-selection-list" id="customer-selection-list">
            <!-- åŠ¨æ€ç”Ÿæˆçš„å®¢æˆ·é€‰æ‹©åˆ—è¡¨ -->
          </div>
        </div>

        <div class="bulk-payment-actions">
          <button type="button" class="btn-secondary" onclick="closeBulkPaymentModal()">å–æ¶ˆ</button>
          <button type="button" class="btn-primary" onclick="submitBulkPayment()">ç¢ºèªæ‰¹é‡ç¹³æ¬¾</button>
        </div>
      </div>
    </div>
  </div>

  <!-- å®¢æˆ¶è©³æƒ… Modal -->
  <div id="customer-detail-modal" class="modal">
    <div class="modal-content large">
      <span class="close-modal" id="close-detail-modal">&times;</span>
      <div class="customer-detail-content">
        <!-- åŠ¨æ€ç”Ÿæˆçš„å®¢æˆ·è¯¦æƒ…å†…å®¹ -->
      </div>
    </div>
  </div>

  <!-- è‡ªåŠ¨åˆ·æ–°æŒ‡ç¤ºå™¨ -->
          <!-- è¨­å‚™ç®¡ç†å·²ç§»è‡³ç¨ç«‹é é¢ (sales-management.html) -->

  <div class="auto-refresh-indicator" style="display: none;">
    æ•¸æ“šå·²æ›´æ–°
  </div>

  <script src="customer-card-system.js"></script>
  <script src="main.js"></script>
  <script>
    // æª¢æŸ¥monitor-btnå…ƒç´ æ˜¯å¦å­˜åœ¨
    const monitorBtn = document.getElementById('monitor-btn');
    if (monitorBtn) {
      monitorBtn.onclick = function() {
        window.open('/monitor.html', '_blank');
      };
    }

    // ç¸£å¸‚èˆ‡åœ°å€å°æ‡‰è¡¨
    const cityDistricts = {
      'å°åŒ—å¸‚': ['ä¸­æ­£å€','å¤§åŒå€','ä¸­å±±å€','æ¾å±±å€','å¤§å®‰å€','è¬è¯å€','ä¿¡ç¾©å€','å£«æ—å€','åŒ—æŠ•å€','å…§æ¹–å€','å—æ¸¯å€','æ–‡å±±å€'],
      'æ–°åŒ—å¸‚': ['æ¿æ©‹å€','ä¸‰é‡å€','ä¸­å’Œå€','æ°¸å’Œå€','æ–°èŠå€','æ–°åº—å€','æ¨¹æ—å€','é¶¯æ­Œå€','ä¸‰å³½å€','æ·¡æ°´å€','æ±æ­¢å€','ç‘èŠ³å€','åœŸåŸå€','è˜†æ´²å€','äº”è‚¡å€','æ³°å±±å€','æ—å£å€','æ·±å‘å€','çŸ³ç¢‡å€','åªæ—å€','ä¸‰èŠå€','çŸ³é–€å€','å…«é‡Œå€','å¹³æºªå€','é›™æºªå€','è²¢å¯®å€','é‡‘å±±å€','è¬é‡Œå€','çƒä¾†å€'],
      'æ¡ƒåœ’å¸‚': ['æ¡ƒåœ’å€','ä¸­å£¢å€','å¹³é®å€','å…«å¾·å€','æ¥Šæ¢…å€','è˜†ç«¹å€','å¤§æºªå€','å¤§åœ’å€','é¾œå±±å€','é¾æ½­å€','æ–°å±‹å€','è§€éŸ³å€','å¾©èˆˆå€'],
      'å°ä¸­å¸‚': ['ä¸­å€','æ±å€','å—å€','è¥¿å€','åŒ—å€','åŒ—å±¯å€','è¥¿å±¯å€','å—å±¯å€','å¤ªå¹³å€','å¤§é‡Œå€','éœ§å³°å€','çƒæ—¥å€','è±åŸå€','åé‡Œå€','çŸ³å²¡å€','æ±å‹¢å€','å’Œå¹³å€','æ–°ç¤¾å€','æ½­å­å€','å¤§é›…å€','ç¥å²¡å€','å¤§è‚šå€','æ²™é¹¿å€','é¾äº•å€','æ¢§æ£²å€','æ¸…æ°´å€','å¤§ç”²å€','å¤–åŸ”å€','å¤§å®‰å€'],
      'å°å—å¸‚': ['ä¸­è¥¿å€','æ±å€','å—å€','åŒ—å€','å®‰å¹³å€','å®‰å—å€','æ°¸åº·å€','æ­¸ä»å€','æ–°åŒ–å€','å·¦é®å€','ç‰äº•å€','æ¥ è¥¿å€','å—åŒ–å€','ä»å¾·å€','é—œå»Ÿå€','é¾å´å€','å®˜ç”°å€','éº»è±†å€','ä½³é‡Œå€','è¥¿æ¸¯å€','ä¸ƒè‚¡å€','å°‡è»å€','å­¸ç”²å€','åŒ—é–€å€','æ–°ç‡Ÿå€','å¾Œå£å€','ç™½æ²³å€','æ±å±±å€','å…­ç”²å€','ä¸‹ç‡Ÿå€','æŸ³ç‡Ÿå€','é¹½æ°´å€','å–„åŒ–å€','å¤§å…§å€','å±±ä¸Šå€','æ–°å¸‚å€','å®‰å®šå€'],
      'é«˜é›„å¸‚': ['æ–°èˆˆå€','å‰é‡‘å€','è‹“é›…å€','é¹½åŸ•å€','é¼“å±±å€','æ——æ´¥å€','å‰é®å€','ä¸‰æ°‘å€','æ¥ æ¢“å€','å°æ¸¯å€','å·¦ç‡Ÿå€','ä»æ­¦å€','å¤§ç¤¾å€','å²¡å±±å€','è·¯ç«¹å€','é˜¿è“®å€','ç”°å¯®å€','ç‡•å·¢å€','æ©‹é ­å€','æ¢“å®˜å€','å½Œé™€å€','æ°¸å®‰å€','æ¹–å…§å€','é³³å±±å€','å¤§å¯®å€','æ—åœ’å€','é³¥æ¾å€','å¤§æ¨¹å€','æ——å±±å€','ç¾æ¿ƒå€','å…­é¾œå€','å…§é–€å€','æ‰æ—å€','ç”²ä»™å€','æ¡ƒæºå€','é‚£ç‘ªå¤å€','èŒ‚æ—å€','èŒ„è£å€'],
      'åŸºéš†å¸‚': ['ä»æ„›å€','ä¿¡ç¾©å€','ä¸­æ­£å€','ä¸­å±±å€','å®‰æ¨‚å€','æš–æš–å€','ä¸ƒå µå€'],
      'æ–°ç«¹å¸‚': ['æ±å€','åŒ—å€','é¦™å±±å€'],
      'å˜‰ç¾©å¸‚': ['æ±å€','è¥¿å€'],
      'æ–°ç«¹ç¸£': ['ç«¹åŒ—å¸‚','æ¹–å£é„‰','æ–°è±é„‰','æ–°åŸ”é®','é—œè¥¿é®','èŠæ—é„‰','å¯¶å±±é„‰','ç«¹æ±é®','äº”å³°é„‰','æ©«å±±é„‰','å°–çŸ³é„‰','åŒ—åŸ”é„‰','å³¨çœ‰é„‰'],
      'è‹—æ —ç¸£': ['è‹—æ —å¸‚','è‹‘è£¡é®','é€šéœ„é®','ç«¹å—é®','é ­ä»½å¸‚','å¾Œé¾é®','å“è˜­é®','å¤§æ¹–é„‰','å…¬é¤¨é„‰','éŠ…é‘¼é„‰','å—åº„é„‰','é ­å±‹é„‰','ä¸‰ç¾©é„‰','è¥¿æ¹–é„‰','é€ æ©‹é„‰','ä¸‰ç£é„‰','ç…æ½­é„‰','æ³°å®‰é„‰'],
      'å½°åŒ–ç¸£': ['å½°åŒ–å¸‚','é¹¿æ¸¯é®','å’Œç¾é®','ç·šè¥¿é„‰','ä¼¸æ¸¯é„‰','ç¦èˆˆé„‰','ç§€æ°´é„‰','èŠ±å£‡é„‰','èŠ¬åœ’é„‰','å“¡æ—å¸‚','æºªæ¹–é®','ç”°ä¸­é®','å¤§æ‘é„‰','åŸ”é¹½é„‰','åŸ”å¿ƒé„‰','æ°¸é–é„‰','ç¤¾é ­é„‰','äºŒæ°´é„‰','åŒ—æ–—é®','äºŒæ—é®','ç”°å°¾é„‰','åŸ¤é ­é„‰','èŠ³è‹‘é„‰','å¤§åŸé„‰','ç«¹å¡˜é„‰','æºªå·é„‰'],
      'å—æŠ•ç¸£': ['å—æŠ•å¸‚','ä¸­å¯®é„‰','è‰å±¯é®','åœ‹å§“é„‰','åŸ”é‡Œé®','ä»æ„›é„‰','åé–“é„‰','é›†é›†é®','æ°´é‡Œé„‰','é­šæ± é„‰','ä¿¡ç¾©é„‰','ç«¹å±±é®','é¹¿è°·é„‰'],
      'é›²æ—ç¸£': ['æ–—å…­å¸‚','æ–—å—é®','è™å°¾é®','è¥¿èºé®','åœŸåº«é®','åŒ—æ¸¯é®','å¤å‘é„‰','å¤§åŸ¤é„‰','è¿æ¡é„‰','æ—å…§é„‰','äºŒå´™é„‰','å´™èƒŒé„‰','éº¥å¯®é„‰','æ±å‹¢é„‰','è¤’å¿ é„‰','å°è¥¿é„‰','å…ƒé•·é„‰','å››æ¹–é„‰','å£æ¹–é„‰','æ°´æ—é„‰'],
      'å˜‰ç¾©ç¸£': ['å¤ªä¿å¸‚','æœ´å­å¸‚','å¸ƒè¢‹é®','å¤§æ—é®','æ°‘é›„é„‰','æºªå£é„‰','æ–°æ¸¯é„‰','å…­è…³é„‰','æ±çŸ³é„‰','ç¾©ç«¹é„‰','é¹¿è‰é„‰','æ°´ä¸Šé„‰','ä¸­åŸ”é„‰','ç«¹å´é„‰','æ¢…å±±é„‰','ç•ªè·¯é„‰','å¤§åŸ”é„‰','é˜¿é‡Œå±±é„‰'],
      'å±æ±ç¸£': ['å±æ±å¸‚','æ½®å·é®','æ±æ¸¯é®','æ†æ˜¥é®','è¬ä¸¹é„‰','é•·æ²»é„‰','éºŸæ´›é„‰','ä¹å¦‚é„‰','é‡Œæ¸¯é„‰','é¹½åŸ”é„‰','é«˜æ¨¹é„‰','è¬å·’é„‰','å…§åŸ”é„‰','ç«¹ç”°é„‰','æ–°åŸ¤é„‰','æ‹å¯®é„‰','æ–°åœ’é„‰','å´é ‚é„‰','æ—é‚Šé„‰','å—å·é„‰','ä½³å†¬é„‰','ç‰çƒé„‰','è»ŠåŸé„‰','æ»¿å·é„‰','æ‹å±±é„‰','ä¸‰åœ°é–€é„‰','éœ§å°é„‰','ç‘ªå®¶é„‰','æ³°æ­¦é„‰','ä¾†ç¾©é„‰','æ˜¥æ—¥é„‰','ç…å­é„‰','ç‰¡ä¸¹é„‰'],
      'å®œè˜­ç¸£': ['å®œè˜­å¸‚','é ­åŸé®','ç¤æºªé„‰','å£¯åœé„‰','å“¡å±±é„‰','ç¾…æ±é®','ä¸‰æ˜Ÿé„‰','å¤§åŒé„‰','äº”çµé„‰','å†¬å±±é„‰','è˜‡æ¾³é®','å—æ¾³é„‰','é‡£é­šå°'],
      'èŠ±è“®ç¸£': ['èŠ±è“®å¸‚','é³³æ—é®','ç‰é‡Œé®','æ–°åŸé„‰','å‰å®‰é„‰','å£½è±é„‰','å…‰å¾©é„‰','è±æ¿±é„‰','ç‘ç©—é„‰','å¯Œé‡Œé„‰','ç§€æ—é„‰','è¬æ¦®é„‰','å“æºªé„‰'],
      'å°æ±ç¸£': ['å°æ±å¸‚','æˆåŠŸé®','é—œå±±é®','å‘å—é„‰','é¹¿é‡é„‰','æ± ä¸Šé„‰','æ±æ²³é„‰','é•·æ¿±é„‰','å¤ªéº»é‡Œé„‰','å¤§æ­¦é„‰','ç¶ å³¶é„‰','æµ·ç«¯é„‰','å»¶å¹³é„‰','é‡‘å³°é„‰','é”ä»é„‰','è˜­å¶¼é„‰'],
      'æ¾æ¹–ç¸£': ['é¦¬å…¬å¸‚','è¥¿å¶¼é„‰','æœ›å®‰é„‰','ä¸ƒç¾é„‰','ç™½æ²™é„‰','æ¹–è¥¿é„‰'],
      'é‡‘é–€ç¸£': ['é‡‘åŸé®','é‡‘æ²™é®','é‡‘æ¹–é®','é‡‘å¯§é„‰','çƒˆå¶¼é„‰','çƒåµé„‰'],
      'é€£æ±Ÿç¸£': ['å—ç«¿é„‰','åŒ—ç«¿é„‰','è’å…‰é„‰','æ±å¼•é„‰']
    };



    

    
    // å„€è¡¨æ¿å¿«é€Ÿæ“ä½œåŠŸèƒ½
    function dashboardQuickAction(action) {
      switch(action) {
        case 'add-customer':
          // åˆ‡æ›åˆ°æ–°å¢å®¢æˆ¶é é¢
          showPage('add');
          break;
        case 'payment-record':
          // é¡¯ç¤ºæ”¶æ¬¾è¨˜éŒ„é é¢æˆ–å½ˆçª—
          showPaymentRecords();
          break;
        case 'export-report':
          // å°å‡ºå ±è¡¨
          exportDashboardReport();
          break;
        case 'system-settings':
          // é¡¯ç¤ºç³»çµ±è¨­ç½®
          showSystemSettings();
          break;
        default:
          console.log('æœªçŸ¥çš„å¿«é€Ÿæ“ä½œ:', action);
      }
    }
    
        // é¡¯ç¤ºæ”¶æ¬¾è¨˜éŒ„
    function showPaymentRecords() {
      // ä½¿ç”¨éœæ…‹æ•¸æ“šï¼Œé¿å…APIèª¿ç”¨å•é¡Œ
      const paymentData = {
        todayPayments: 5950,
        monthPayments: 141700,
        overdueAmount: 55400,
        totalCustomers: 23,
        newCustomers: 23,
        pendingPayments: 2,
        accumulatedSales: 213700,
        totalProfit: 16400
      };
      
      // å‰µå»ºæ”¶æ¬¾è¨˜éŒ„å½ˆçª—
      const modal = document.createElement('div');
      modal.className = 'modal';
      modal.innerHTML = `
        <div class="modal-content">
          <div class="modal-header">
            <h3>æ”¶æ¬¾è¨˜éŒ„</h3>
            <span class="close" onclick="this.parentElement.parentElement.parentElement.remove()">&times;</span>
          </div>
          <div class="modal-body">
            <div class="payment-summary">
              <div class="summary-card">
                <h4>ä»Šæ—¥æ”¶æ¬¾</h4>
                <div class="amount">NT$ ${paymentData.todayPayments.toLocaleString()}</div>
              </div>
              <div class="summary-card">
                <h4>æœ¬æœˆæ”¶æ¬¾</h4>
                <div class="amount">NT$ ${paymentData.monthPayments.toLocaleString()}</div>
              </div>
              <div class="summary-card">
                <h4>é€¾æœŸé‡‘é¡</h4>
                <div class="amount overdue">NT$ ${paymentData.overdueAmount.toLocaleString()}</div>
              </div>
            </div>
            <div class="payment-list">
              <h4>æ”¶æ¬¾çµ±è¨ˆ</h4>
              <div class="payment-item">
                <span class="customer">ç¸½å®¢æˆ¶æ•¸</span>
                <span class="amount">${paymentData.totalCustomers}</span>
                <span class="date">-</span>
              </div>
              <div class="payment-item">
                <span class="customer">æ–°å¢å®¢æˆ¶</span>
                <span class="amount">${paymentData.newCustomers}</span>
                <span class="date">-</span>
              </div>
              <div class="payment-item">
                <span class="customer">å¾…ç¹³æ¬¾é …</span>
                <span class="amount">${paymentData.pendingPayments}</span>
                <span class="date">-</span>
              </div>
              <div class="payment-item">
                <span class="customer">ç´¯ç©ç‡Ÿæ”¶</span>
                <span class="amount">NT$ ${paymentData.accumulatedSales.toLocaleString()}</span>
                <span class="date">-</span>
              </div>
              <div class="payment-item">
                <span class="customer">ç¸½åˆ©æ½¤</span>
                <span class="amount">NT$ ${paymentData.totalProfit.toLocaleString()}</span>
                <span class="date">-</span>
              </div>
            </div>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
    }
    
    // å°å‡ºå„€è¡¨æ¿å ±è¡¨
    function exportDashboardReport() {
      const reportData = {
        title: 'è²¸æ¬¾ç®¡ç†ç³»çµ± - å„€è¡¨æ¿å ±è¡¨',
        date: new Date().toLocaleDateString('zh-TW'),
        summary: {
          totalCustomers: 23,
          newCustomers: 23,
          pendingPayments: 2,
          totalRevenue: 213700,
          profit: 16400
        }
      };
      
      // å‰µå»ºCSVå…§å®¹
      let csvContent = 'data:text/csv;charset=utf-8,';
      csvContent += 'é …ç›®,æ•¸å€¼\n';
      csvContent += `ç¸½å®¢æˆ¶æ•¸,${reportData.summary.totalCustomers}\n`;
      csvContent += `æ–°å¢å®¢æˆ¶,${reportData.summary.newCustomers}\n`;
      csvContent += `å¾…ç¹³æ¬¾é …,${reportData.summary.pendingPayments}\n`;
      csvContent += `ç¸½ç‡Ÿæ”¶,${reportData.summary.totalRevenue}\n`;
      csvContent += `ç¸½åˆ©æ½¤,${reportData.summary.profit}\n`;
      
      // ä¸‹è¼‰CSVæ–‡ä»¶
      const encodedUri = encodeURI(csvContent);
      const link = document.createElement('a');
      link.setAttribute('href', encodedUri);
      link.setAttribute('download', `å„€è¡¨æ¿å ±è¡¨_${new Date().toISOString().split('T')[0]}.csv`);
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      
      // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
      alert('å ±è¡¨å·²æˆåŠŸå°å‡ºï¼');
    }
    
    // é¡¯ç¤ºç³»çµ±è¨­ç½®
    function showSystemSettings() {
      const modal = document.createElement('div');
      modal.className = 'modal';
      modal.innerHTML = `
        <div class="modal-content">
          <div class="modal-header">
            <h3>ç³»çµ±è¨­ç½®</h3>
            <span class="close" onclick="this.parentElement.parentElement.parentElement.remove()">&times;</span>
          </div>
          <div class="modal-body">
            <div class="settings-section">
              <h4>åŸºæœ¬è¨­ç½®</h4>
              <div class="setting-item">
                <label>ç³»çµ±åç¨±</label>
                <input type="text" value="è²¸æ¬¾ç®¡ç†ç³»çµ±" />
              </div>
              <div class="setting-item">
                <label>è‡ªå‹•åˆ·æ–°é–“éš”</label>
                <select>
                  <option value="30">30ç§’</option>
                  <option value="60" selected>1åˆ†é˜</option>
                  <option value="300">5åˆ†é˜</option>
                </select>
              </div>
            </div>
            <div class="settings-section">
              <h4>é€šçŸ¥è¨­ç½®</h4>
              <div class="setting-item">
                <label>
                  <input type="checkbox" checked /> é€¾æœŸæé†’
                </label>
              </div>
              <div class="setting-item">
                <label>
                  <input type="checkbox" checked /> æ–°å®¢æˆ¶é€šçŸ¥
                </label>
              </div>
            </div>
            <div class="settings-section">
              <h4>æ•¸æ“šå‚™ä»½</h4>
              <button onclick="backupData()" class="btn-primary">ç«‹å³å‚™ä»½</button>
              <button onclick="restoreData()" class="btn-secondary">æ¢å¾©æ•¸æ“š</button>
            </div>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
    }
    
    // å‚™ä»½æ•¸æ“š
    function backupData() {
      alert('æ•¸æ“šå‚™ä»½åŠŸèƒ½æ­£åœ¨é–‹ç™¼ä¸­...');
    }
    
    // æ¢å¾©æ•¸æ“š
    function restoreData() {
      alert('æ•¸æ“šæ¢å¾©åŠŸèƒ½æ­£åœ¨é–‹ç™¼ä¸­...');
    }
  </script>
</body>
</html>
